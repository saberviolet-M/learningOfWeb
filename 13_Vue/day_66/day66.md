# day66

## Vue指令

### v-text 和 v-html

#### v-text

> 更新元素的 `textContent/innerText`。如果要更新部分的 `textContent` ，需要使用 `{{ Mustache }}` 插值。

```html
<h1 v-text="msg"></h1>
```

#### v-html

> 更新DOM对象的` innerHTML`,html标签会生效

```html
<h1 v-html="msg"></h1>
```

#### 在网站上动态渲染任意 HTML 是非常危险的，因为容易导致 XSS 攻击(跨站脚本攻击)。

#### 只在可信内容上使用 `v-html`，`永不`用在用户提交的内容上。

### v-for 

> 遍历对象和数组

- 遍历数组 (常用)

  ```js
  v-for="item in 数组名"  //item每一项
  v-for="(item, index) in 数组名"  //item每一项 index下标
  ```

- 遍历对象 (一般不用)

  ```js
  v-for="(value, prop,index) in 对象"  //value属性值, prop属性名(键), index索引
  ```

#### v-for 的key的说明

- vue 的更新机制的说明
  - 数据变化了, vue会对比`新旧 虚拟 dom`的差异,  对比出差异, 进行差异化更新 (高效)

- 为啥不对比真实dom, 而对比虚拟dom?  =>  提升对比效率

- key 只是给 虚拟dom 添加了一个唯一的标识, 改变了同级兄弟元素的对比复用策略, 进而优化列表的渲染更新性能

- 总结: 一般为了优化渲染的性能, 可以在遍历列表时, 加上一个 key属性, key一般指定成 id 

### Diffing算法

> 虚拟**DOM**就是一个**js**对象
>
> **Diffing**算法就是尽可能复用已有**DOM**

- 对比**根节点**不同，直接销毁重建（很少见）
- 对比**同一类型元素**，保留DOM节点，只更新**对应不同**属性或内容
- **子节点进行递归**对比，**次序**比对子节点，不同则销毁重建，添加**key**属性后对比**key标识符**不同则重建，具有相同**key**的**DOM**则复用（修改较少的**DOM**，**key**需要是唯一值）

### Tips - 样式处理

#### v-bind 对于class的增强

> 不会覆盖原有`class`

```js
(1) :class="对象" //(常用)
	// { 类名: 布尔值, 类名: 布尔值 } 
	// 如果是true, 加上这个类, 如果是false, 移除这个类

(2) :class="数组"
	// ['类名1', '类名2', '类名3']
	// 只要有这个类, 就加上(有引号)
```

#### v-bind对于style 的增强

```jsx
(1) :style="对象"  => :style="obj"
               =>  :style="{ width: '200px' }"
(2) :style=[{}]//就是数组包裹对象
/* 用“-”连接的，小驼峰命名写样式名 */
```

