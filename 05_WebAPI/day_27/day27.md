# day27

## DOM

### style属性（样式操作）

- style属性特点
  - 1、元素的style属性包含了当前元素的**所有行内样式**（存在一个对象里）
  - 2、元素的style属性可以**获取**行内样式也可以**设置**行内样式 
  - 3、样式中类似`background-color`等属性需要写成**驼峰命名**`backgroundCOlor`（因为`-`在js中不是一个合法的标识符），类似`width`等属性设置时需要**加单位**

### 获取元素对象的特殊操作：

- `document.body` ：直接获取body元素
- `document.documentElement` ：直接获取html元素
- `document.head` ：直接获取head元素
- `document.title` ：直接获取title中的文本

### 排他思想

> "干掉所有人（包括自己）"在偷偷“复活”

![排他思想](D:\1_2020Web\Note\05_WebAPI\day_27\media\排他思想.gif)

- 找到所有的按钮
- 给所有按钮注册点击事件
- 点击之后让自己变色
  - **排他思想：** 先让所有的都不变色（**清空所有**），再让当前这个变色（**单独设置**）

### 获取元素的方法

#### 通过id获取（通用）

```js
// 参数：元素的id属性值
// 返回值： 一个元素。如果不存在，会返回null
document.getElementById("id");
```

#### 通过标签名获取（通用）

```js
// 参数：标签名
// 返回值：伪数组。无论找到几个元素，返回值都是伪数组
document.getElementsByTagName("tagName");
```

---

> **以上两个是没有兼容性问题的，以下方法ie678不支持**

---


#### 通过类名获取（一般不用）

```js
// 参数：类名
// 返回值：伪数组。无论找到几个元素，返回值都是伪数组
document.getElementsByClassName("类名")
```

#### 通过name获取（一般不用）

```js
//只能用于表单元素，一般不用
// 参数：name属性值
// 返回值：伪数组。无论找到几个元素，返回值都是伪数组
document.getElementsByName("name属性值");
```

#### 获取单个元素（通过css选择器获取--常用）

```js
// 参数：css选择器
// 返回值：一个元素。如果有多个，则返回第一个，如果没有返回null
document.querySelector('css选择器')
```

#### 获取多个元素（通过css选择器获取--常用）

```js
// 参数：css选择器
// 返回值：伪数组。无论找到几个元素，返回值都是伪数组
document.querySelectorAll('css选择器');
```

### 标签的自定义属性

> 标签上属性可以大致分成两类：
>
> **固有属性：**标签上本来就有的属性：如：title、id、class......
>
> **自定义属性：**标签上本来没有的属性，自己随意添加的属性
>
> **html标签上固有属性**会同步到**DOM对象**上，**自定义属性**则不会

- 如果要获取**html标签上**的固有属性（本来就有的属性：title、id、class），可以直接通过dom对象点语法获取和设置

- 但是如果要获取**html标签上**的自定义属性（本来没有的属性，自己随意添加的），**使用点语法就不行了**，需要通过特殊的方法获取和设置
- **PS：**标签的自定义属性在DOM对象中是**不存在**的，DOM对象中**只会储存**固有属性

#### attribute（系列）方法---操作元素属性

> attribute系列方法是**通用的**操作标签属性的方法，不管是**固有属性**还是**自定义属**性都**可以操作**

```js
// 获取标签的属性
.getAttribute('属性名');
// 设置标签的属性
.setAttribute('属性名', '属性值');
// 移除标签的属性
.removeAttribute('属性名');
```

### DOM树（查找节点）

> 文档页面中的很多节点之间，可以通过树状结构表示
>
> 直接通过当前节点可以找到其兄弟节点、父子节点

#### 子节点

|                             作用                             |         属性          |
| :----------------------------------------------------------: | :-------------------: |
| 获取所有子节点（包括**元素**节点、**注释**节点、**文本**节点） |      childNodes       |
|            获取**所有子元素**（只有**元素**节点）            |     **children**      |
| 获取**第一个**子节点（包括**元素**节点、**注释**节点、**文本**节点） |      firstChild       |
|           获取**第一个子元素**（只有**元素**节点）           | **firstElementChild** |
| 获取**最后一个**子节点（包括元素节点、**注释**节点、**文本**节点） |       lastChild       |
|          获取**最后一个子元素**（只有**元素**节点）          | **lastElementChild**  |

#### 兄弟节点

|                             作用                             |            属性            |
| :----------------------------------------------------------: | :------------------------: |
| 获取上一个兄弟节点（包括**元素**节点、注释节点、**文本**节点） |      previousSibling       |
|          获取**上一个兄弟元素**（只有**元素**节点）          | **previousElementSibling** |
| 获取下一个兄弟节点（包括**元素**节点、注释节点、**文本**节点） |        nextSibling         |
|          获取**下一个兄弟元素**（只有**元素**节点）          |   **nextElementSibling**   |

#### 父节点

|          作用          |     属性      |
| :--------------------: | :-----------: |
|       获取父节点       |  parentNode   |
| 获取父节点（**元素**） | parentElement |

### 节点操作

#### 添加节点： parent.appendChild(newChild)

> 在父节点**parent**中，最后添加一个新的子节点

#### 插入节点：parent.insertBefore(newChild,refChild)

> 在父元素**parent**中**refChild**元素之前插入**newChild**元素
>
> **insertBefore(newChild,null)---置于父元素最后**

#### 复制（克隆）节点：node.cloneNode()

> 需要复制的节点**node**调用复制方法，返回复制的新节点
>
> 可以给参数：
>
> - true（深拷贝）---内容全部拷贝
>
> - false（默认）---浅拷贝（只复制节点不拷贝内容）

#### 删除节点：parent.removeChild(child)

> 在父元素**parent**中，删除child元素
>
> child.remove()---子元素自删，兼容性问题比较大

### keydown与keyup事件

|   事件    |          功能          |                            注意点                            |
| :-------: | :--------------------: | :----------------------------------------------------------: |
| onkeydown | 当键盘按下时触发的事件 | 获取文本框的值，此时value的值是上一次的（**包括**键盘上的功能键） |
|  onpress  | 当键盘按下时触发的事件 | 获取文本框的值，此时value的值是上一次的（**不包括**键盘上的功能键） |
|  onkeyup  | 当键盘弹起时触发的事件 |          获取文本框的值，此时value的值是本次输入的           |

